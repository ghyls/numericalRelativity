

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1. Inside the interface &mdash; NumericalRelativity 1.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.3. NOTAS" href="notes.html" />
    <link rel="prev" title="2. Tutorials" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> NumericalRelativity
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Numerical Relativity</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.1. Inside the interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-inputs-tab">2.1.1. The <em>Inputs</em> tab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-christoffel-symbols-tab">2.1.2. The <em>Christoffel symbols</em> tab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-riemann-tensor-tab">2.1.3. The <em>Riemann tensor</em> tab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#theuniverse-tab">2.1.4. <em>TheUniverse</em> tab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gw-1d-tab">2.1.5. <em>GW 1D</em> tab</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#outside-the-interface">2.2. Outside the interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#christ-py">2.2.1. christ.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#riem-py">2.2.2. riem.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#newtonmulti-py">2.2.3. newtonMulti.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#einsteinmulti-cpp">2.2.4. einsteinMulti.cpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mercury-py">2.2.5. mercury.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulfromdata-py">2.2.6. simulFromData.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="notes.html">2.3. NOTAS</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NumericalRelativity</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">2. Tutorials</a> &raquo;</li>
        
      <li>2.1. Inside the interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/theTutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>We will split the tutorial into two different sections, <em>Inside the interface</em>,
in which we will describe the usage of our application, and <em>Outside the
interface</em>, in which we will talk about the independent scripts.</p>
<div class="section" id="inside-the-interface">
<h1>2.1. Inside the interface<a class="headerlink" href="#inside-the-interface" title="Permalink to this headline">¶</a></h1>
<p>We will describe the main application in the first place. It is a <em>standalone</em>
widget that can be run either from Linux and Windows. Note that being a
<em>standalone</em> file means that it can be used <strong>without any additional program</strong>
installed. Although it has been built using python, neither python or any
other external software is necessary for running this widget.</p>
<p>The two first tools included in the widget are precisely a calculator to
compute both any Christoffel symbol and any component of the Riemann tensor. The
<em>ingredients</em> that we need in order to make those dishes are the matrix form of
the metric and the <em>order</em> of the differentials when we write the interval.</p>
<p>Note that this last consideration is necessary, since we will use the variables
both as variables (we will eventually derive with respect to them) and as
indexes, both in Christoffel’s and Riemman’s case.</p>
<div class="section" id="the-inputs-tab">
<h2>2.1.1. The <em>Inputs</em> tab<a class="headerlink" href="#the-inputs-tab" title="Permalink to this headline">¶</a></h2>
<p>Let’s consider, for example, the Schwarzschild metric,</p>
<div class="math notranslate nohighlight">
\[-\left(1-\frac{2GM}{r}\right)dt^2 + \frac{1}{1-2GM/r}dr^2 + r^2d\theta^2 + r^2\sin(\theta)^2d^2\phi\]</div>
<p>the order of the variables in this expression will be <em>t</em>, <em>r</em>, <em>th</em> and <em>fi</em>
(note that we can not write math symbols in the application). then, we write
each element in <span class="math notranslate nohighlight">\(g_{\mu\nu}\)</span>. In this case, only the blanks in the
diagonal are filled. the empty blanks are treated as zeros. If we want to work
with a (let’s say) a 3D matrix, we should left empty the last row and column,
and the code will treat the case as a 3D metric, instead of a 4D one with a row
and a column of zeros.</p>
<p>Note also that some common symbolic constants, like <em>G</em>, <em>M</em> and <em>R</em> are
pre-implemented in the code, so one can use them without any problem.</p>
<p>If you need to use more constants, you can also type <em>C1</em>, <em>C2</em> and <em>C3</em>.</p>
<p>The following image illustrates how we should fill the <em>Inputs</em> section in the
Schwarzschild scenario.</p>
<div class="figure align-center" id="id1">
<span id="inputs"></span><img alt="All the inputs are set in a proper way" src="../_images/inputs.png" />
<p class="caption"><span class="caption-number">Fig. 2.1 </span><span class="caption-text">All the inputs are set in a proper way</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If your metric is so complex that you need <em>even more</em> symbolic
constants than the ones provided, you can add them manually to the
header of <code class="docutils literal notranslate"><span class="pre">christ.py</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that you are not introducing wrong expressions or
undefined variables in the metric. The program may crash if you
do so.</p>
</div>
<p>Let’s move now to the Christoffel symbols tab, and let’s compute some of them.</p>
</div>
<div class="section" id="the-christoffel-symbols-tab">
<h2>2.1.2. The <em>Christoffel symbols</em> tab<a class="headerlink" href="#the-christoffel-symbols-tab" title="Permalink to this headline">¶</a></h2>
<p>we can calculate here any Christoffel symbol based on the data we have already
introduced.</p>
<p>The interface is quite intuitive, so there is no need for further explanation.
Just enter the variables in the appropriate blanks and press
<span class="guilabel">calculate</span>. The result will show under the button.</p>
<div class="figure align-center" id="id2">
<img alt="All the inputs are set in a proper way" src="../_images/christ.png" />
<p class="caption"><span class="caption-number">Fig. 2.2 </span><span class="caption-text">All the inputs are set in a proper way</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that you are being consistent with the variables you
used to define the metric.</p>
</div>
</div>
<div class="section" id="the-riemann-tensor-tab">
<h2>2.1.3. The <em>Riemann tensor</em> tab<a class="headerlink" href="#the-riemann-tensor-tab" title="Permalink to this headline">¶</a></h2>
<p>It works in the same way as the previous one. Note that, in order to calculate
any component of the Riemann tensor, one has to compute previously many
Christoffel symbols, so this widget may be bit slower. Anyway, the code is
optimized in the sense that it calculates every required symbol just in one
call to the <em>same</em> function that computes Christoffel symbols in the previous
tab.</p>
<div class="figure align-center" id="id3">
<img alt="All the inputs are set in a proper way" src="../_images/rieman.png" />
<p class="caption"><span class="caption-number">Fig. 2.3 </span><span class="caption-text">All the inputs are set in a proper way</span></p>
</div>
</div>
<div class="section" id="theuniverse-tab">
<h2>2.1.4. <em>TheUniverse</em> tab<a class="headerlink" href="#theuniverse-tab" title="Permalink to this headline">¶</a></h2>
<p>it simulates the evolution of many gravitational-attracted bodies computed with
einsteinMulti.cpp. Just choose the text file produced by the script and press
“Start!”. The simulation will be opened in an external window.</p>
</div>
<div class="section" id="gw-1d-tab">
<h2>2.1.5. <em>GW 1D</em> tab<a class="headerlink" href="#gw-1d-tab" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<div class="section" id="outside-the-interface">
<h1>2.2. Outside the interface<a class="headerlink" href="#outside-the-interface" title="Permalink to this headline">¶</a></h1>
<p>Everything that is done <em>inside</em> the interface can be also done <em>outside</em>, by
using the following applications:</p>
<div class="section" id="christ-py">
<h2>2.2.1. christ.py<a class="headerlink" href="#christ-py" title="Permalink to this headline">¶</a></h2>
<p>It contains a function that can be called by looking at the commented example
at the end of the script. Here you can also add more constants if needed,
remember that this is also the function that is called from inside the widget.
It returns <span class="math notranslate nohighlight">\(\Gamma_{ab}^c\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">christoffel</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">g_mn</span><span class="p">,</span> <span class="n">abc</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">ABC</span> <span class="o">=</span> <span class="p">[]):</span>
    <span class="c1"># computes \Gamma_{ab}^c.</span>

    <span class="c1"># ABC contains multiple &quot;abc&quot; tuples. Use it if you want to compute</span>
    <span class="c1"># multiple symbols at once</span>

    <span class="c1"># abc = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] is used if you only want to compute one symbol.</span>

    <span class="c1">#Constants that may appear in the metric</span>
    <span class="n">G</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">C1</span><span class="p">,</span> <span class="n">C2</span><span class="p">,</span> <span class="n">C3</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;G M R C1 C2 C3&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="riem-py">
<h2>2.2.2. riem.py<a class="headerlink" href="#riem-py" title="Permalink to this headline">¶</a></h2>
<p>It contains a function that can be called by looking at the commented example
at the end of the script. Here you can also add more constants if needed,
remember that this is also the function that is called from inside the widget.</p>
<p>It will return the component <span class="math notranslate nohighlight">\(R^a_{bcd}\)</span> of the Riemann tensor.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">riemman</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">g_mn</span><span class="p">,</span> <span class="n">abcd</span><span class="p">):</span>

    <span class="c1"># computes R^a_{bcd}</span>

    <span class="c1"># ds is a list containing the variables in the interval, in the correct</span>
    <span class="c1"># order</span>

    <span class="c1"># g_mn is the metric</span>

    <span class="c1"># abcd = the indexes referring to the component of R that we want to</span>
    <span class="c1"># compute</span>
</pre></div>
</div>
</div>
<div class="section" id="newtonmulti-py">
<h2>2.2.3. newtonMulti.py<a class="headerlink" href="#newtonmulti-py" title="Permalink to this headline">¶</a></h2>
<p>It does the same as newtonMulti.cpp. The code in python is more legible, but we
recommend to use it only if you haven’t got any c++ compiler installed.
Otherwise, einsteinMulti.cpp will be much faster.</p>
</div>
<div class="section" id="einsteinmulti-cpp">
<h2>2.2.4. einsteinMulti.cpp<a class="headerlink" href="#einsteinmulti-cpp" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>einsteinMulti.cpp</strong>: Does the same as <em>newtonMulti</em>, but an option is</dt>
<dd>added to perform the calculations with Swartchild potential, instead of
newton’s one. It is also much more optimized in terms of performance.</dd>
</dl>
<p>The basic options are:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">tmax</span></code>: The simulation time. The code will finish either if there is only
one particle left (no more collisions remaining) or the simulation time is
over).</p>
<p><code class="docutils literal notranslate"><span class="pre">nObj</span></code>: The number of objects to simulate.</p>
<p><code class="docutils literal notranslate"><span class="pre">dt</span></code>: the timestep. This variable is quite important, and is directly
related to the accuracy of the code.</p>
<p>In some cases, especially when isung the Schwarzschild potential, one has to
take care of this variable, in order to prevent situations like the one
in the following figure:</p>
</div></blockquote>
<div class="figure align-center" id="id4">
<span id="orbitmal"></span><img alt="an example of wrong timestep choice" src="../_images/orbitmal.png" />
<p class="caption"><span class="caption-number">Fig. 2.4 </span><span class="caption-text">an example of wrong timestep choice</span></p>
</div>
<p>The result is shown in figure <a class="reference internal" href="#orbitmal"><span class="std std-numref">Fig. 2.4</span></a> example denotes wrong parameters
in the code. At the beginning of the motion, the timestep is more than enough
to describe the orbit precisely, but as the <em>planet</em> approaches the <em>sun</em>, the
timestep becomes too big. In the closest point, the force is so strong that the
planet gains so much velocity and appears too far away from the sun in the next
iteration. Then, when the force is computed again, it is not strong enough to
stop the planet scaping from the sun at high velocity (a situation that is not
real).</p>
<p>Some suggestions to fix the code may be:</p>
<p>1.  Reduce the timestep. The timestep may be reduced drastically (see the
distance between the last and de penultimate positions). This will improve
accuracy, but will increase considerably the execution time.</p>
<p>2.  define a <em>collision radius</em>, and stop the simulation if the two objects
<em>collide</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This problem is even bigger in the relativistic case. The corrections
made on Newton’s potential decay as <span class="math notranslate nohighlight">\(r^{-4}\)</span>, which is a
minor correction at long distances, but bigger than Newton’s
<span class="math notranslate nohighlight">\(r^{-2}\)</span> when <span class="math notranslate nohighlight">\(r&lt;1\)</span>.</p>
</div>
</div>
<div class="section" id="mercury-py">
<h2>2.2.5. mercury.py<a class="headerlink" href="#mercury-py" title="Permalink to this headline">¶</a></h2>
<p>It uses a simple correction to Newton’s potential in order to show the
variation of Mercury’s perihelium. As we saw, the precession is visible on the
plot (simulating the orbit only 2 periods) only when we the effect is
amplified by a factor of <span class="math notranslate nohighlight">\(10^6\)</span>. In fact, as Einstein predicted, the
perihelium of Mercury rotates only 46’’ per turn, too small for being seen in
our simulation.</p>
<div class="figure align-center" id="id5">
<span id="mercury"></span><img alt="the precession of Mercury, exaggerating the effects of General Relativity." src="../_images/mercury.png" />
<p class="caption"><span class="caption-number">Fig. 2.5 </span><span class="caption-text">the precession of Mercury, exaggerating the effects of General Relativity.</span></p>
</div>
</div>
<div class="section" id="simulfromdata-py">
<h2>2.2.6. simulFromData.py<a class="headerlink" href="#simulfromdata-py" title="Permalink to this headline">¶</a></h2>
<p>It uses the data produced with einsteinMulti.cpp or newtonMulti.py to build and
show the animation. It is written in Python, but uses <code class="docutils literal notranslate"><span class="pre">pyqtgraph</span></code> instead of
Matplotlib for showing the result. This choice was made for the sake of
performance. This file is also implemented in the widget.</p>
<div class="figure align-center" id="id6">
<span id="universe"></span><img alt="a Screenshot of the simulation." src="../_images/universe.png" />
<p class="caption"><span class="caption-number">Fig. 2.6 </span><span class="caption-text">a Screenshot of the simulation.</span></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="notes.html" class="btn btn-neutral float-right" title="2.3. NOTAS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="2. Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, 2019, Diego Valledor, Mario González.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.4',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>